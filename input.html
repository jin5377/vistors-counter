
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>누적인원 입력 (보호됨)</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', Arial, sans-serif; margin: 24px; }
    h1 { font-size: 1.4rem; margin: 0 0 12px; }
    form { display:grid; gap:12px; max-width: 420px; }
    label { font-weight:600; }
    input[type="date"], input[type="number"], input[type="password"] { padding:10px; border:1px solid #ddd; border-radius:10px; width:100%; }
    .row { display:flex; gap:8px; flex-wrap:wrap; }
    .btn { padding: 10px 14px; border:0; border-radius:10px; background:#111; color:#fff; cursor:pointer; }
    .btn.secondary { background:#f5f5f5; color:#111; border:1px solid #ddd; }
    .muted { color:#777; font-size:0.9rem; }
    #formArea { display:none; margin-top:20px; }
  </style>
</head>
<body>
  <h1>누적인원 입력 (보호됨)</h1>

  <div id="loginArea">
    <label for="pw">비밀번호 입력</label>
    <input id="pw" type="password" placeholder="비밀번호" />
    <button class="btn" id="pwBtn">확인</button>
    <p class="muted">※ 접근 제한됨. 올바른 비밀번호를 입력해야 합니다.</p>
  </div>

  <div id="formArea">
    <form id="f">
      <div>
        <label for="date">날짜</label>
        <input id="date" name="date" type="date" required />
      </div>
      <div>
        <label for="count">인원</label>
        <input id="count" name="count" type="number" inputmode="numeric" min="1" step="1" placeholder="예: 1234" required />
        <div class="muted">음수, 소수 입력 불가. 같은 날짜는 합산 처리.</div>
      </div>
      <div class="row">
        <button class="btn" type="submit">입력</button>
        <a class="btn secondary" href="index.html">현황 보기</a>
      </div>
    </form>
  </div>

<script>
const PASSWORD = "6208";

document.getElementById('pwBtn').addEventListener('click', () => {
  const val = document.getElementById('pw').value.trim();
  if (val === PASSWORD) {
    document.getElementById('loginArea').style.display = 'none';
    document.getElementById('formArea').style.display = 'block';
  } else {
    alert('비밀번호가 올바르지 않습니다.');
  }
});

function sanitizeInt(val) {
  const n = Number(val);
  if (!Number.isFinite(n)) return null;
  if (n <= 0) return null;
  if (!Number.isInteger(n)) return Math.round(n);
  return n;
}

document.getElementById('f').addEventListener('submit', (e) => {
  e.preventDefault();
  const date = document.getElementById('date').value;
  const raw = document.getElementById('count').value;
  const count = sanitizeInt(raw);
  if (!date || !/\d{4}-\d{2}-\d{2}/.test(date)) {
    alert('날짜를 선택하세요');
    return;
  }
  if (count === null) {
    alert('인원을 올바르게 입력하세요');
    return;
  }
  const url = new URL('index.html', location.href);
  url.searchParams.set('date', date);
  url.searchParams.set('count', String(count));
  location.href = url.toString();
});
</script>
</body>
</html>
